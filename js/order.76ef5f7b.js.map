{"version":3,"file":"js/order.76ef5f7b.js","mappings":"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","sources":["webpack://mushop/./src/effects/commonEffect.js","webpack://mushop/./src/effects/updateQuantity.js","webpack://mushop/./src/components/ToastPart.vue","webpack://mushop/./src/components/ToastPart.vue?f8e8","webpack://mushop/./src/views/order/orderConfirmation.vue","webpack://mushop/./src/components/OrderProduct.vue","webpack://mushop/./src/components/OrderProduct.vue?e629","webpack://mushop/./src/views/order/OrderPart.vue","webpack://mushop/./src/views/order/OrderPart.vue?3dbf","webpack://mushop/./src/views/order/TopArea.vue","webpack://mushop/./src/views/order/TopArea.vue?12a6","webpack://mushop/./src/views/order/orderConfirmation.vue?1ba5"],"sourcesContent":["import { useRouter } from \"vue-router\";\r\n\r\nexport const toBackEffect = () => {\r\n    const router = useRouter();\r\n    const toBack = () => {\r\n        router.back();\r\n    };\r\n    return { toBack };\r\n};","import { computed } from \"vue\";\r\nimport { useStore } from \"vuex\"\r\n\r\nexport const updateQuantityEffect = (shopId) => {\r\n    const store = useStore();\r\n    const cartList = store.state.cartList\r\n    const changeItemQuantity = (shopId, productId, item, num) => {\r\n        store.commit('changeItemQuantity', {\r\n            shopId, productId, item, num\r\n        })\r\n    }\r\n\r\n    const productList = computed(() => {\r\n        const productList = cartList[shopId]?.productList || {};\r\n        let notEmptyProductList = {};\r\n        for (let i in productList) {\r\n            const product = productList[i]\r\n            if (product.count > 0) {\r\n                notEmptyProductList[i] = product\r\n            }\r\n        }\r\n        return notEmptyProductList;\r\n    });\r\n\r\n    const orderedProductList = computed(() => {\r\n        const productList = cartList[shopId]?.productList || {};\r\n        let ordered = {};\r\n        for (let i in productList) {\r\n            const product = productList[i]\r\n            if (product.check && product.count > 0) {\r\n                ordered[i] = product\r\n            }\r\n        }\r\n        return ordered;\r\n    })\r\n\r\n    const shopName = computed(() => {\r\n        return cartList[shopId]?.shopName || ''\r\n    });\r\n\r\n    const Calculations = computed(() => {\r\n        const productList = cartList[shopId]?.productList;\r\n        let result = { total: 0, sum: 0, allChecked: true }\r\n        if (productList) {\r\n            for (const key in productList) {\r\n                const product = productList[key];\r\n                result.total += product.count;\r\n                if (product.check) {\r\n                    result.sum += product.price * product.count;\r\n                }\r\n                if (product.count > 0 && !product.check) {\r\n                    result.allChecked = false;\r\n                }\r\n            }\r\n        }\r\n        result.sum = result.sum.toFixed(2)\r\n        return result;\r\n    })\r\n\r\n    return { cartList, productList, Calculations, shopName, orderedProductList, changeItemQuantity }\r\n}","<template>\r\n  <div class=\"toast\">{{message}}</div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from '@vue/reactivity';\r\nexport const useToastEffect = () => {\r\n  const data = reactive({\r\n    toastMessage: \"\",\r\n    show: false,\r\n  });\r\n  const showToast = (mes) => {\r\n    data.show = true;\r\n    data.toastMessage = mes;\r\n    setTimeout(()=>{\r\n        data.show = false;\r\n    },2000)\r\n  };\r\n  const { toastMessage, show } = toRefs(data)\r\n  return { toastMessage, show, showToast };\r\n};\r\nexport default {\r\n  name: \"ToastPart\",\r\n  props:['message']\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.toast {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: rgba(0, 0, 0, 0.35);\r\n  color: #fff;\r\n  padding: 0.1rem;\r\n  border-radius: 0.05rem;\r\n}\r\n</style>","import { render } from \"./ToastPart.vue?vue&type=template&id=f70ca294&scoped=true\"\nimport script from \"./ToastPart.vue?vue&type=script&lang=js\"\nexport * from \"./ToastPart.vue?vue&type=script&lang=js\"\n\nimport \"./ToastPart.vue?vue&type=style&index=0&id=f70ca294&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f70ca294\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper\">\r\n    <TopArea />\r\n    <OrderProduct\r\n      :productList=\"productList\"\r\n      :shopName=\"shopName\"\r\n      :Calculations=\"Calculations\"\r\n    />\r\n  </div>\r\n  <OrderPart />\r\n</template>\r\n<script>\r\nimport { useRoute } from \"vue-router\";\r\nimport { updateQuantityEffect } from \"../../effects/updateQuantity\";\r\nimport OrderProduct from \"../../components/OrderProduct.vue\"\r\nimport OrderPart from \"./OrderPart.vue\"\r\nimport TopArea from \"./TopArea.vue\"\r\nexport default {\r\n  name: \"orderConfirmation\",\r\n  components:{OrderProduct,OrderPart,TopArea},\r\n  setup() {\r\n    const route = useRoute();\r\n    const shopId = route.params.id;\r\n    const { productList, Calculations, shopName } =\r\n      updateQuantityEffect(shopId);\r\n    return { productList, Calculations, shopName};\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/_common.scss\";\r\n.wrapper {\r\n  @include wrapper;\r\n  background-color: #f5f5f5;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"product\" v-if=\"Calculations.total > 0\">\r\n    <h3 class=\"product__header\">{{ shopName }}</h3>\r\n    <template v-for=\"item in productList\" :key=\"item._id\">\r\n      <div class=\"product__item\" v-if=\"item.check\">\r\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n        <div class=\"product__item__detail\">\r\n          <h4 class=\"product__item__title\">{{ item.name }}</h4>\r\n          <p class=\"product__item__price\">\r\n            <em>￥</em><i>{{ item.price }}</i\r\n            ><em>×</em><i>{{ item.count }}</i>\r\n            <span class=\"product__item__sum\"\r\n              >￥<i>{{ (item.price * item.count).toFixed(2) }}</i></span\r\n            >\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"OrderProduct\",\r\n  props: [\"productList\", \"shopName\", \"Calculations\"],\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"../style/_common.scss\";\r\n.product {\r\n  padding: 0.16rem;\r\n  margin: 0.16rem;\r\n  margin-bottom: 0;\r\n  background-color: #fff;\r\n  &__header {\r\n    font-size: 0.16rem;\r\n    font-weight: 600;\r\n  }\r\n  &__item {\r\n    display: flex;\r\n    margin-top: 0.16rem;\r\n    &__img {\r\n      width: 0.46rem;\r\n      height: 0.46rem;\r\n      margin-right: 0.16rem;\r\n    }\r\n    &__detail {\r\n      flex: 1;\r\n      overflow: hidden;\r\n    }\r\n    &__title {\r\n      font-size: 0.14rem;\r\n      font-weight: 600;\r\n      line-height: 0.2rem;\r\n      margin-bottom: 0.12rem;\r\n      @include ellipsis;\r\n    }\r\n    &__price {\r\n      position: relative;\r\n      color: #e93b3b;\r\n      i {\r\n        font-size: 0.14rem;\r\n      }\r\n    }\r\n    &__sum {\r\n      position: absolute;\r\n      right: 0;\r\n      color: #000;\r\n      i {\r\n        font-size: 0.14rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n.hide__product {\r\n  margin-top: 0.16rem;\r\n  background-color: #f5f5f5;\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: .14rem;\r\n  line-height: 0.28rem;\r\n}\r\n</style>","import { render } from \"./OrderProduct.vue?vue&type=template&id=3709fb78&scoped=true\"\nimport script from \"./OrderProduct.vue?vue&type=script&lang=js\"\nexport * from \"./OrderProduct.vue?vue&type=script&lang=js\"\n\nimport \"./OrderProduct.vue?vue&type=style&index=0&id=3709fb78&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3709fb78\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"order\">\r\n    <div class=\"order__price\">\r\n      实付金额 <b>¥{{ Calculations.sum }}</b>\r\n    </div>\r\n    <div class=\"order__btn\" @click=\"() => handlesubmitOrder(true)\">\r\n      提交订单\r\n    </div>\r\n  </div>\r\n  <div class=\"mask\" v-if=\"showConfirm\" @click=\"() => handlesubmitOrder(false)\">\r\n    <div class=\"confirmation\" @click.stop>\r\n      <h2 class=\"confirmation__title\">确认要离开收银台？</h2>\r\n      <p class=\"confirmation__notice\">请尽快完成支付，否则将被取消</p>\r\n      <div class=\"confirmation__btn\">\r\n        <button\r\n          class=\"confirmation__btn__cancel\"\r\n          @click=\"() => postConfirmOrder(true)\"\r\n        >\r\n          取消订单\r\n        </button>\r\n        <button\r\n          class=\"confirmation__btn__confir\"\r\n          @click=\"() => postConfirmOrder(false)\"\r\n        >\r\n          确认支付\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"mask\" v-if=\"showSuccess\" @click=\"toBack\">\r\n    <div class=\"success\">\r\n      <div class=\"success__icon iconfont\">&#xe622;</div>\r\n      <div class=\"success__x iconfont\" @click=\"()=>handlepayment(false)\">&#xe97d;</div>\r\n      <p class=\"success__notice\">支付成功，等待配送</p>\r\n    </div>\r\n  </div>\r\n  <ToastPart v-if=\"show\" :message=\"toastMessage\" />\r\n</template>\r\n\r\n\r\n<script>\r\nimport { ref } from \"@vue/reactivity\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { post } from \"../../utils/request\";\r\nimport { updateQuantityEffect } from \"../../effects/updateQuantity\";\r\nimport { toBackEffect } from \"../../effects/commonEffect\";\r\nimport ToastPart, { useToastEffect } from \"../../components/ToastPart.vue\";\r\n\r\n// 确认订单弹窗\r\nconst useOrderClickEffect = () => {\r\n  // 支付或取消订单单窗\r\n  const showConfirm = ref(false);\r\n  const handlesubmitOrder = (status) => {\r\n    showConfirm.value = status;\r\n  };\r\n\r\n  // 支付成功弹窗\r\n  const showSuccess = ref(false);\r\n  const handlepayment = (status) => {\r\n    showConfirm.value = false;\r\n    showSuccess.value = status;\r\n  };\r\n  return { showConfirm, handlesubmitOrder, showSuccess, handlepayment };\r\n};\r\n\r\n// post订单信息\r\nconst useMakeOrderEffect = (\r\n  shopId,\r\n  shopName,\r\n  orderedProductList,\r\n  showToast,\r\n  handlepayment\r\n) => {\r\n  const router = useRouter();\r\n  const store = useStore();\r\n\r\n  const postConfirmOrder = async (isCanceled) => {\r\n    const products = [];\r\n    for (let i in orderedProductList.value) {\r\n      const product = orderedProductList.value[i];\r\n      products.push({ id: parseInt(product._id, 10), num: product.count });\r\n    }\r\n    try {\r\n      const result = await post(\"/api/order\", {\r\n        addressId: 1,\r\n        shopId,\r\n        shopName: shopName.value,\r\n        isCanceled,\r\n        products,\r\n      });\r\n      if (result?.errno === 0) {\r\n        store.commit(\"clearOrderedItem\", shopId);\r\n        if (!isCanceled) {\r\n          handlepayment(true);\r\n          setTimeout(() => {\r\n            router.push({ name: \"orderList\" });\r\n          }, 1500);\r\n        } else {\r\n          router.push({ name: \"orderList\" });\r\n        }\r\n      }\r\n    } catch (e) {\r\n      showToast(\"请求失败\");\r\n    }\r\n  };\r\n  return { postConfirmOrder };\r\n};\r\nexport default {\r\n  name: \"OrderPart\",\r\n  components: { ToastPart },\r\n  setup() {\r\n    const { toBack } = toBackEffect();\r\n    const { toastMessage, show, showToast } = useToastEffect();\r\n    const { showConfirm, handlesubmitOrder, showSuccess, handlepayment } =\r\n      useOrderClickEffect();\r\n    const route = useRoute();\r\n    const shopId = parseInt(route.params.id, 10);\r\n    const { shopName, orderedProductList, Calculations } =\r\n      updateQuantityEffect(shopId);\r\n    const { postConfirmOrder } = useMakeOrderEffect(\r\n      shopId,\r\n      shopName,\r\n      orderedProductList,\r\n      showToast,\r\n      handlepayment\r\n    );\r\n    return {\r\n      toastMessage,\r\n      show,\r\n      toBack,\r\n      Calculations,\r\n      showConfirm,\r\n      handlesubmitOrder,\r\n      postConfirmOrder,\r\n      showSuccess,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.order {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 0.5rem;\r\n  line-height: 0.5rem;\r\n  &__price {\r\n    font-size: 0.14rem;\r\n    margin-left: 0.16rem;\r\n    b {\r\n      color: #e93b3b;\r\n      font-size: 0.16rem;\r\n      margin-left: 0.1rem;\r\n    }\r\n  }\r\n  &__btn {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: 0.98rem;\r\n    height: 0.5rem;\r\n    background-color: #4fb0f9;\r\n    text-align: center;\r\n    font-size: 0.14rem;\r\n    color: #fff;\r\n  }\r\n}\r\n.mask {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 1;\r\n  .confirmation,\r\n  .success {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 0.37rem;\r\n    right: 0.37rem;\r\n    transform: translateY(-50%);\r\n    padding: 0.24rem 0;\r\n    background-color: #fff;\r\n    border-radius: 0.04rem;\r\n    text-align: center;\r\n  }\r\n  .confirmation {\r\n    &__title {\r\n      font-size: 0.18rem;\r\n      font-weight: 400;\r\n    }\r\n    &__notice {\r\n      font-size: 0.14rem;\r\n      color: #666;\r\n      margin-top: 0.1rem;\r\n      margin-bottom: 0.2rem;\r\n    }\r\n    &__btn {\r\n      button {\r\n        width: 0.8rem;\r\n        height: 0.32rem;\r\n        border-radius: 0.16rem;\r\n        border: .01rem solid #4fb0f9;\r\n      }\r\n      &__cancel {\r\n        font-size: 0.14rem;\r\n        color: #0091ff;\r\n        margin-right: 0.1rem;\r\n      }\r\n      &__confir {\r\n        background: #4fb0f9;\r\n        font-size: 0.14rem;\r\n        color: #fff;\r\n        margin-left: 0.1rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n.success {\r\n  position: relative;\r\n  &__x {\r\n    position: absolute;\r\n    top: 0.1rem;\r\n    right: 0.1rem;\r\n  }\r\n  &__icon {\r\n    font-size: 0.5rem;\r\n  }\r\n  &__notice {\r\n    font-size: 0.18rem;\r\n    margin: 0.1rem 0;\r\n  }\r\n}\r\n</style>","import { render } from \"./OrderPart.vue?vue&type=template&id=52ecb0ad&scoped=true\"\nimport script from \"./OrderPart.vue?vue&type=script&lang=js\"\nexport * from \"./OrderPart.vue?vue&type=script&lang=js\"\n\nimport \"./OrderPart.vue?vue&type=style&index=0&id=52ecb0ad&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-52ecb0ad\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"top\">\r\n      <h2>\r\n        <span class=\"top__back iconfont\" @click=\"toBack\">&#xe72a;</span>确认订单\r\n      </h2>\r\n      <div class=\"receiver\">\r\n        <p class=\"receiver__title\">收货地址</p>\r\n        <p class=\"receiver__address\">\r\n          北京理工大学国防科技园2号楼10层\r\n          <span class=\"iconfont receiver__icon\">&#xe72a;</span>\r\n        </p>\r\n        <p class=\"receiver__info\">\r\n          <span class=\"receiver__info__name\">瑶妹（先生）</span>\r\n          <span class=\"receiver__info__number\">18911024266</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { toBackEffect } from \"../../effects/commonEffect\";\r\nexport default {\r\n    name:'TopArea',\r\n    setup(){\r\n        const { toBack } = toBackEffect();\r\n        return {toBack}\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.top {\r\n  height: 1.8rem;\r\n  background-size: 100% 1.6rem;\r\n  background-image: linear-gradient(0deg, rgba(0, 145, 255, 0) 4%, #0091ff 50%);\r\n  background-repeat: no-repeat;\r\n  h2 {\r\n    position: relative;\r\n    padding: 0.2rem .18rem;\r\n    font-size: 0.16rem;\r\n    font-weight: 400;\r\n    text-align: center;\r\n    color: #fff;\r\n    span {\r\n      position: absolute;\r\n      left: .18rem;\r\n      font-size: .22rem;\r\n    }\r\n  }\r\n}\r\n.receiver {\r\n    margin: 0 .18rem;\r\n    padding: .16rem;\r\n    background-color: #fff;\r\n    border-radius: .04rem;\r\n    &__title {\r\n        font-size: .16rem;\r\n        font-weight: 600;\r\n        margin-bottom: .16rem;\r\n    }\r\n    &__address {\r\n        position: relative;\r\n        font-size: .14rem;\r\n        margin-bottom: .1rem;\r\n    }\r\n    &__icon {\r\n        position: absolute;\r\n        right: 0;\r\n        transform: rotateY(180deg);\r\n    }\r\n    &__info {\r\n        color: #666;\r\n    }\r\n  }\r\n</style>","import { render } from \"./TopArea.vue?vue&type=template&id=7138ec1e&scoped=true\"\nimport script from \"./TopArea.vue?vue&type=script&lang=js\"\nexport * from \"./TopArea.vue?vue&type=script&lang=js\"\n\nimport \"./TopArea.vue?vue&type=style&index=0&id=7138ec1e&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7138ec1e\"]])\n\nexport default __exports__","import { render } from \"./orderConfirmation.vue?vue&type=template&id=da96905a&scoped=true\"\nimport script from \"./orderConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./orderConfirmation.vue?vue&type=script&lang=js\"\n\nimport \"./orderConfirmation.vue?vue&type=style&index=0&id=da96905a&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-da96905a\"]])\n\nexport default __exports__"],"names":["toBackEffect","router","useRouter","toBack","back","updateQuantityEffect","shopId","store","useStore","cartList","state","changeItemQuantity","productId","item","num","commit","productList","computed","notEmptyProductList","i","product","count","orderedProductList","ordered","check","shopName","Calculations","result","total","sum","allChecked","key","price","toFixed","class","_createElementBlock","_toDisplayString","$props","useToastEffect","data","reactive","toastMessage","show","showToast","mes","setTimeout","toRefs","name","props","__exports__","render","_createElementVNode","_createVNode","_component_TopArea","_component_OrderProduct","$setup","_component_OrderPart","_Fragment","_renderList","_id","src","imgUrl","_hoisted_8","_hoisted_9","onClick","_hoisted_4","_hoisted_5","_ctx","_createBlock","_component_ToastPart","message","useOrderClickEffect","showConfirm","ref","handlesubmitOrder","status","value","showSuccess","handlepayment","useMakeOrderEffect","postConfirmOrder","async","products","push","id","parseInt","post","addressId","isCanceled","errno","e","components","ToastPart","setup","route","useRoute","params","_hoisted_3","OrderProduct","OrderPart","TopArea"],"sourceRoot":""}