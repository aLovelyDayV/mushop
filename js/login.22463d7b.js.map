{"version":3,"file":"js/login.22463d7b.js","mappings":"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","sources":["webpack://mushop/./src/components/ToastPart.vue","webpack://mushop/./src/components/ToastPart.vue?f8e8","webpack://mushop/./src/views/login/LoginView.vue","webpack://mushop/./src/views/login/LoginView.vue?f6e8"],"sourcesContent":["<template>\r\n  <div class=\"toast\">{{message}}</div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from '@vue/reactivity';\r\nexport const useToastEffect = () => {\r\n  const data = reactive({\r\n    toastMessage: \"\",\r\n    show: false,\r\n  });\r\n  const showToast = (mes) => {\r\n    data.show = true;\r\n    data.toastMessage = mes;\r\n    setTimeout(()=>{\r\n        data.show = false;\r\n    },2000)\r\n  };\r\n  const { toastMessage, show } = toRefs(data)\r\n  return { toastMessage, show, showToast };\r\n};\r\nexport default {\r\n  name: \"ToastPart\",\r\n  props:['message']\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.toast {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background-color: rgba(0, 0, 0, 0.35);\r\n  color: #fff;\r\n  padding: 0.1rem;\r\n  border-radius: 0.05rem;\r\n}\r\n</style>","import { render } from \"./ToastPart.vue?vue&type=template&id=f70ca294&scoped=true\"\nimport script from \"./ToastPart.vue?vue&type=script&lang=js\"\nexport * from \"./ToastPart.vue?vue&type=script&lang=js\"\n\nimport \"./ToastPart.vue?vue&type=style&index=0&id=f70ca294&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f70ca294\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"wrapper__img\">\r\n      <img src=\"http://www.dell-lee.com/imgs/vue3/user.png\" />\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n      <input\r\n        class=\"wrapper__input__user\"\r\n        type=\"text\"\r\n        placeholder=\"请输入用户名\"\r\n        v-model=\"username\"\r\n      />\r\n      <input\r\n        class=\"wrapper__input__password\"\r\n        type=\"password\"\r\n        placeholder=\"请输入密码\"\r\n        v-model=\"password\"\r\n      />\r\n    </div>\r\n    <div class=\"wrapper__login-button\">\r\n      <button @click=\"handleLogin\">登陆</button>\r\n    </div>\r\n    <div class=\"wrapper__login-link\" @click=\"toRegister\">立即注册</div>\r\n  </div>\r\n  <div class=\"mask\" v-if=\"showQR\">\r\n    <div class=\"mask__container\">\r\n      <p class=\"mask__container__notice\">由于后端接口问题，微信预览效果更佳</p>\r\n      <img src=\"./image/mushop.png\">\r\n      <span class=\"mask__container__x iconfont\" @click=\"handleQRclick\">&#xe97d;</span>\r\n    </div>\r\n  </div>\r\n  <ToastPart v-if=\"show\" :message=\"toastMessage\" />\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from \"vue-router\";\r\nimport { reactive, ref, toRefs } from \"@vue/reactivity\";\r\nimport ToastPart, { useToastEffect } from \"../../components/ToastPart.vue\";\r\nimport { post } from \"../../utils/request\";\r\n\r\n// 关闭二维码\r\nconst closeQRcode = ()=>{\r\n  const showQR = ref(true)\r\n  const handleQRclick = ()=>{\r\n    showQR.value = false\r\n  }\r\n  return {showQR,handleQRclick}\r\n}\r\n// 登陆\r\nconst useLoginEffect = (showToast) => {\r\n  const router = useRouter();\r\n  const data = reactive({\r\n    username: \"abc\",\r\n    password: \"123456\",\r\n  });\r\n  const handleLogin = async () => {\r\n    const { username, password } = data;\r\n    if (username.trim() === \"\") {\r\n      showToast(\"用户名不能为空\");\r\n      return;\r\n    }\r\n    if (password.trim() === \"\") {\r\n      showToast(\"密码不能为空\");\r\n      return;\r\n    }\r\n    try {\r\n      const result = await post(\"/api/user/login\", {\r\n        username: username,\r\n        password: password,\r\n      });\r\n      if (result?.errno === 0) {\r\n        localStorage.isLogin = true;\r\n        router.push({ name: \"home\" });\r\n      } else {\r\n        showToast(\"登陆失败\");\r\n      }\r\n    } catch (e) {\r\n      showToast(\"请求失败\");\r\n    }\r\n  };\r\n  const { username, password } = toRefs(data);\r\n  return { username, password, handleLogin };\r\n};\r\n\r\n//去往注册页面\r\nconst toRegisterEffect = () => {\r\n  const router = useRouter();\r\n  const toRegister = () => {\r\n    router.push({ name: \"register\" });\r\n  };\r\n  return { toRegister };\r\n};\r\n\r\nexport default {\r\n  name: \"LoginView\",\r\n  components: { ToastPart },\r\n  setup() {\r\n    const {showQR,handleQRclick} = closeQRcode()\r\n    const { toastMessage, show, showToast } = useToastEffect();\r\n    const { username, password, handleLogin } = useLoginEffect(showToast);\r\n    const { toRegister } = toRegisterEffect();\r\n    return { showQR,handleQRclick,username, password, toastMessage, show, handleLogin, toRegister };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/variables.scss\";\r\n.wrapper {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  padding: 0 0.4rem;\r\n  &__img {\r\n    margin-bottom: 0.4rem;\r\n    text-align: center;\r\n    img {\r\n      width: 0.66rem;\r\n      height: 0.66rem;\r\n    }\r\n  }\r\n  &__input {\r\n    input {\r\n      width: 100%;\r\n      height: 0.48rem;\r\n      background: #f9f9f9;\r\n      border: 0.01rem solid rgba(0, 0, 0, 0.1);\r\n      border-radius: 0.06rem;\r\n      text-indent: 5%;\r\n      font-size: 0.16rem;\r\n      &::placeholder {\r\n        color: $content-notice-fontColor;\r\n      }\r\n    }\r\n    &__password {\r\n      margin-top: 0.16rem;\r\n      margin-bottom: 0.32rem;\r\n    }\r\n  }\r\n  &__login-button {\r\n    button {\r\n      width: 100%;\r\n      height: 0.48rem;\r\n      background: #0091ff;\r\n      box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\r\n      border-radius: 0.04rem;\r\n      color: #ffffff;\r\n      font-size: 0.16rem;\r\n    }\r\n  }\r\n  &__login-link {\r\n    margin-top: 0.16rem;\r\n    text-align: center;\r\n    font-size: 0.14rem;\r\n    color: $content-notice-fontColor;\r\n  }\r\n}\r\n.mask {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  z-index: 1;\r\n  &__container {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: .37rem;\r\n    right: .37rem;\r\n    padding: .2rem 0;\r\n    transform: translateY(-50%);\r\n    background-color: #fff;\r\n    text-align: center;\r\n  &__notice {\r\n    font-size: .14rem;\r\n    color: #0091ff;\r\n    margin-bottom: .2rem;\r\n  }\r\n  &__x {\r\n    position: absolute;\r\n    top: .05rem;\r\n    right: .1rem;\r\n    cursor: pointer;\r\n  }\r\n  }\r\n}\r\n</style>","import { render } from \"./LoginView.vue?vue&type=template&id=9836ea48&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=9836ea48&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\l\\\\Desktop\\\\jingdongvue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9836ea48\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_toDisplayString","$props","useToastEffect","data","reactive","toastMessage","show","showToast","mes","setTimeout","toRefs","name","props","__exports__","render","_createElementVNode","src","_imports_0","_hoisted_2","type","placeholder","$setup","$event","onClick","_hoisted_7","_hoisted_8","_createBlock","_component_ToastPart","message","closeQRcode","showQR","ref","handleQRclick","value","useLoginEffect","router","useRouter","username","password","handleLogin","async","trim","result","post","errno","localStorage","isLogin","push","e","toRegisterEffect","toRegister","components","ToastPart","setup"],"sourceRoot":""}